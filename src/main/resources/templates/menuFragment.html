<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<div th:fragment="submenu">
    <ul>
        <li th:each="cat : ${categories}">
            <span th:text="${cat.categoryName}"></span>
            <div th:with="categories = ${cat.children}" th:include=":: submenu"></div>
        </li>
    </ul>
</div>
</html>